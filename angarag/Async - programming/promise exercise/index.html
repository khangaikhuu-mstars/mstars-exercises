<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise</title>
</head>

<body>
    <main>

    </main>


    <script>
        console.log('Hello i am starting');
        let value_checker = "";
        const isItDoneYet = new Promise((resolve, reject) => {
            const api_url = "https://reqres.in/api/users?page=2";
            const req = new XMLHttpRequest();
            req.open('GET', api_url);
            req.onload = function () {
                if (req.status == 200) {
                    resolve(req.responseText);
                } else {
                    reject(Error(req.statusText));
                }
            };
            req.send();
        });
        console.log(isItDoneYet)

        isItDoneYet.then((data) => JSON.parse(data)).then((d)=>{
           const data = d.data
            data.map((i)=>{
                console.log(i)
                document.querySelector('main').innerHTML += i.email
            })
        })
            .catch(err => {
                console.log('Aldaa=>');
                console.error(err)
            })


        console.log('its value_checker= ' + value_checker)
    </script>

</body>

</html>